{
  "params": {
    "application": "Turbine",
    "environment": "staging",
    "region": "us-east-1",
    "version": "v1.2.3"
  },
  "resources": [
    {
      "name": "turbine-engine-queue",
      "type": "SQS",
      "queueName": {"$ref": "tmpl!example-queue-{{params.version}}"},
      "config": {}
    },
    {
      "name": "turbine-engine-worker",
      "type": "EB_WORKER",
      "config": {
        "ApplicationName": "Turbine Engine",
        "EnvironmentName": {"$ref": "tmpl!turbine-worker-{{params.version}}"},
        "options": {
          "sqsQueue": {"$ref": "resources.turbine-engine-queue"}
        }
      }
    },
    {
      "name": "turbine-api",
      "type": "EB_WEB_APP",
      "config": {
        "ApplicationName": "Turbine API",
        "EnvironmentName": {"$ref": "tmpl!turbine-api-{{params.version}}"},
        "options": {
          "env": {
            "SQS_URL": {"$ref": "resources.turbine-engine-queue.url"},
            "VERSION": {"$ref": "params.version"}
          }
        }
      }
    }
  ]
}